# Flexible-Heatpump
This is a tool to create full-electric water-air heat pump demand profiles under flexible operation (**flex-profiles**) given some precalculated baselines with a very specific format (code will be uploaded soon). This code was written as part of the work of the GO-e project and is currently only accessible to partners of that consortium.

## Table of Contents
- [Installation](#installation)
- [Using the Tool](#using-the-tool)
- [Project Outline](#project-outline)
  - [Code](#code)
  - [Data](#data)
- [Contact](#contact)

## Installation

To install this tool, follow these steps:

1. As a priliminary step, install VS-buildtools from: https://visualstudio.microsoft.com/thank-you-downloading-visual-studio/?sku=BuildTools. We do need this software to run the C++ dependencies in the highspy package (the solver of the optimization problems).
2. Clone the repository to your local machine using the HTTPS link:
   ```bash
   git clone https://github.com/Project-GO-e/hp-flex-metric.git
3. Navigate to the project directory
4. Install all requirements inside a virtual environment:
   ```bash
   pip install -r requirements.txt
## Using the tool
The only way to interact with the tool is via the main.py file. Please do not change any other hardcoded values in the repository. These parameters were also used for the baseline operation of the heat pumps, so changing them will give you results that do not make sense. In the main file the user can enter the following parameters to calculate a set of profiles under flexible operation of a heat pump system:
Physical attributes:
- house_type
- house_year
- residents_type

Congestion attributes:
- start_congestion_month: indicates the month the congestion starts. Range: [1, ..., 12]
- start_congestion_day: indicates the day the congestion starts. Range:[1, ..., 31]
- start_congestion_ptu: indicates the ptu of the day the congestion starts. Range: [0, ..., 95]
- end_congestion_ptu: indicates the ptu of the (next) day the congestion starts. Range:[0, ..., 95]
- window_before_congestion_ptu: number of ptus before the congestion the demand can be shifted torwards [0, ..., 95]
- window_after_congestion_ptu: number of ptus after the congestion the demand can be shifted torwards [0, ..., 95]

The congestion length should not be larger than 48 ptus.

To generate the flex profiles for a set of physical attributes, there should always the corresponding files in the repository:
- the baseline profiles (example is: baselines+2_1kap+2012+one_person.csv)
- house, tank temperatures under baseline operation (example is: states+2_1kap+2012+one_person.pickle)
- set temperatures under baseline operation (example is: temps+2_1kap+2012+one_person.pickle)

These files are pre-calculated and stored in the GO-e sharepoint in the "HP profielen" and "HP temperaturen" folder in de folder: https://dnv.sharepoint.com/teams/GO-e/Shared%20Documents/Forms/AllItems.aspx?id=%2Fteams%2FGO%2De%2FShared%20Documents%2FWP%204%2FWerkdocumenten&viewid=e22f804b%2D21a2%2D42f8%2Db0e4%2D04975d8fbe18.

## Project Outline
### Code
The project consists of code, given by the main.py file and the following classes:
- FlexProfileGeneratorBuilder: can build FlexProfileGenerator instances
- FlexProfileGenerator: can generate the flex profiles
- FlexOptimizer: handles the optimization part of the generation of the flex profiles
- HeatpumpSystem: data class that stores all heat pump parameters
- House: data class that stores all house parameters

### Data
The project requires the following data files
- dhw_profiles_(residents_type).csv: domestic hot water profiles for the 3 resident types, generated by pysimdeum: https://github.com/KWR-Water/pysimdeum
- house_hp_map.pickle: pickled dictionary mapping the dimensions of the heat pump to every house type.
- irradiance_walls.csv: precalculated irradiance on the east-west wall of the houses
- rvo_woningen.csv: thermal properties of the rvo woningen
- weather_2020_15min.csv: the outside temperature, ground temperature, and solar irradiance in the year 2020.

## Contact
For any feedback or questions on the project, you can contact Bart van der Holst on b.v.d.holst@tue.nl.
